(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a65754e"],{"44eb":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",[r("el-row",{staticClass:"row-title",attrs:{span:24}},[r("el-col",{attrs:{span:4}},[r("el-button",{staticClass:"addGroup",on:{click:t.handleAddGroup}},[t._v("新增分组")]),r("div",{staticClass:"api-title"},[r("strong",[t._v("用例分组")])]),r("div",{staticClass:"api-title",staticStyle:{cursor:"pointer"}},[r("router-link",{staticStyle:{"text-decoration":"none",color:"aliceblue"},attrs:{to:{name:"用例列表",params:{project_id:this.$route.params.project_id}}}},[t._v(" 所有用例 ")])],1),r("aside",[r("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","active-text-color":"rgb(32, 160, 255)","unique-opened":!0}},[t._l(t.groupData,(function(e,i){return[r("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:{name:"分组用例列表",params:{project_id:t.project,firstGroup:e.id}}}},[r("el-menu-item",{key:e.id,staticClass:"group",attrs:{index:i+""}},[r("template",{slot:"title"},[t._v(t._s(e.name)+" "),r("el-dropdown",{staticClass:"editGroup",staticStyle:{"margin-right":"10%"},attrs:{trigger:"hover"}},[r("i",{staticClass:"el-icon-more"}),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{nativeOn:{click:function(r){return t.handleDelFirst(e.id)}}},[t._v("删除")]),r("el-dropdown-item",{nativeOn:{click:function(r){return t.handleEditFirstGroup(e.id,e.name)}}},[t._v("修改")])],1)],1)],1)],2)],1)]}))],2)],1)],1),r("el-dialog",{staticStyle:{width:"60%",left:"20%"},attrs:{title:"新增分组",visible:t.addGroupFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.addGroupFormVisible=e}}},[r("el-form",{ref:"addGroupForm",attrs:{model:t.addGroupForm,"label-width":"80px",rules:t.addGroupFormRules}},[r("el-form-item",{attrs:{label:"分组名称",prop:"firstgroup"}},[r("el-input",{staticStyle:{width:"90%"},attrs:{"auto-complete":"off"},model:{value:t.addGroupForm.firstgroup,callback:function(e){t.$set(t.addGroupForm,"firstgroup","string"===typeof e?e.trim():e)},expression:"addGroupForm.firstgroup"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(e){t.addGroupFormVisible=!1}}},[t._v("取消")]),r("el-button",{attrs:{type:"primary",loading:t.addGroupLoading},nativeOn:{click:function(e){return t.addGroupSubmit(e)}}},[t._v("提交")])],1)],1),r("el-dialog",{staticStyle:{width:"60%",left:"20%"},attrs:{title:"编辑分组",visible:t.editFirstGroupFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.editFirstGroupFormVisible=e}}},[r("el-form",{ref:"editFirstGroupForm",attrs:{model:t.editFirstGroupForm,"label-width":"80px",rules:t.editFirstGroupFormRules}},[r("el-form-item",{attrs:{label:"分组名称",prop:"secondFirstGroup"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editFirstGroupForm.secondFirstGroup,callback:function(e){t.$set(t.editFirstGroupForm,"secondFirstGroup","string"===typeof e?e.trim():e)},expression:"editFirstGroupForm.secondFirstGroup"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(e){t.editFirstGroupFormVisible=!1}}},[t._v("取消")]),r("el-button",{attrs:{type:"primary",loading:t.editFirstGroupLoading},nativeOn:{click:function(e){return t.editFirstGroupSubmit(e)}}},[t._v("提交")])],1)],1),r("el-col",{attrs:{span:20}},[r("div",{staticStyle:{"margin-left":"10px","margin-right":"20px"}},[r("router-view")],1)])],1)],1)},o=[],s=r("2d92"),a=r("1157"),d=r.n(a),n={data(){return{project:"",groupData:[],addGroupFormVisible:!1,addGroupLoading:!1,addFormVisible:!1,addGroupFormRules:{firstgroup:[{required:!1,trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}]},addGroupForm:{firstgroup:""},editFirstGroupFormVisible:!1,editFirstGroupLoading:!1,editFirstFormVisible:!1,editFirstGroupFormRules:{secondFirstGroup:[{required:!0,message:"请输入分组名称",trigger:"blur"}]},editFirstGroupForm:{firstgroup:"",second_id:""},filters:{name:""},api:[],total:0,page:1,listLoading:!1,sels:[],apiView:!0}},methods:{init(){this.addGroupForm.firstgroup=""},getCaseGroup(){let t=this;d.a.ajax({type:"get",url:s["qb"]+"/api/automation/group",async:!0,data:{project_id:Number(this.$route.params.project_id)},headers:{Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(e){"0"===e.code?(t.groupData=e.data,t.init()):t.$message.error({message:e.msg,center:!0})}})},handleAddGroup(){this.addGroupFormVisible=!0},handleEditFirstGroup(t,e){this.editFirstGroupFormVisible=!0,this.editFirstGroupForm.second_id=t,this.editFirstGroupForm.secondFirstGroup=e},addGroupSubmit(){this.$refs.addGroupForm.validate(t=>{if(t){let t=this;this.$confirm("确认提交吗？","提示",{}).then(()=>{t.addGroupLoading=!0,d.a.ajax({type:"post",url:s["qb"]+"/api/automation/add_group",async:!0,data:JSON.stringify({project_id:Number(this.$route.params.project_id),name:t.addGroupForm.firstgroup}),headers:{"Content-Type":"application/json",Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(e){t.addGroupLoading=!1,"0"===e.code?(t.$message({message:"添加成功",center:!0,type:"success"}),t.$refs["addGroupForm"].resetFields(),t.addGroupFormVisible=!1,t.getCaseGroup(),t.init()):"999997"===e.code?t.$message.error({message:e.msg,center:!0}):(t.$message.error({message:e.msg,center:!0}),t.$refs["addGroupForm"].resetFields(),t.addGroupFormVisible=!1,t.getCaseGroup(),t.init())}})})}})},editFirstGroupSubmit(){this.$refs.editFirstGroupForm.validate(t=>{if(t){let t=this;this.$confirm("确认提交吗？","提示",{}).then(()=>{t.editFirstGroupLoading=!0,d.a.ajax({type:"post",url:s["qb"]+"/api/automation/update_name_group",async:!0,data:JSON.stringify({project_id:Number(this.$route.params.project_id),name:t.editFirstGroupForm.secondFirstGroup,id:t.editFirstGroupForm.second_id}),headers:{"Content-Type":"application/json",Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(e){t.editFirstGroupLoading=!1,"0"===e.code?(t.$message({message:"修改成功",center:!0,type:"success"}),t.$refs["editFirstGroupForm"].resetFields(),t.editFirstGroupFormVisible=!1,t.getCaseGroup(),t.init()):"999997"===e.code?t.$message.error({message:e.msg,center:!0}):(t.$message.error({message:e.msg,center:!0}),t.$refs["editFirstGroupForm"].resetFields(),t.editFirstGroupFormVisible=!1,t.getCaseGroup(),t.init())}})})}})},handleDelFirst:function(t){this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then(()=>{let e=this;d.a.ajax({type:"post",url:s["qb"]+"/api/automation/del_group",async:!0,data:JSON.stringify({id:Number(t),project_id:Number(this.$route.params.project_id)}),headers:{"Content-Type":"application/json",Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(t){"0"===t.code?e.$message({message:"删除成功",center:!0,type:"success"}):e.$message.error({message:t.msg,center:!0}),e.getCaseGroup()}})}).catch(()=>{})}},mounted(){this.getCaseGroup(),this.project=this.$route.params.project_id}},u=n,p=(r("87fc"),r("2877")),l=Object(p["a"])(u,i,o,!1,null,"311860ce",null);e["default"]=l.exports},"80f7":function(t,e,r){},"87fc":function(t,e,r){"use strict";var i=r("80f7"),o=r.n(i);o.a}}]);